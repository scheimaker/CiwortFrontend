import{u as $}from"./use-quasar.8b191b5c.js";import{g as j,a as A,u as S}from"./words.b33e6a70.js";import{K as D,r as c,a as E,o as K,k as v,m as u,n as y,w as r,x as i,q as t,u as q,v as N,t as f,s as M,a0 as G,a2 as L,D as O}from"./index.3ade1ba5.js";import{_ as Q}from"./plugin-vue_export-helper.21dcd24c.js";import"./utils.a26276ab.js";import"./index-68602d24.94131bdb.js";const U={class:"column q-col-gutter-md",style:{width:"100%","max-width":"600px"}},X={class:"text-h5"},H={class:"text-h1 q-mb-md"},J={key:1},Z={class:"star-container row no-wrap"};var ee={__name:"FlashPage",setup(te){const V=D(),F=$(),w=c(0),x=c(0);let h=c([]);const _=c(0),b=c(0),k=c(!1),C=c(null),a=E(()=>h.value[_.value]);var g=c(null);console.log(a.value);const z=async()=>{try{const e=await A();console.log(e),h.value=e}catch{F.notify({color:"negative",message:"Failed to load words",position:"top"})}},I=async()=>{if(a.value){w.value++,a.value.rightTimes++;var e=[];e.push({id:a.value.id,rightTimes:a.value.rightTimes}),B(),await S(g.value,e),await Y()}},R=async()=>{x.value++;var e=[];a.value&&(e.push({id:a.value.id,wrongTimes:a.value.wrongTimes}),await S(g.value,e),B())},P=()=>{V.push("main")},Y=async()=>{k.value=!0,await O();const e=C.value,s=document.querySelector(".star-container");if(e&&s){const n=s.getBoundingClientRect(),l=e.getBoundingClientRect(),o=s.children;let m=0,p=0;if(o.length>0){const d=o[o.length-1].getBoundingClientRect();d.right-n.left+l.width+10>window.innerWidth?(m=0,p=d.bottom-l.top+10):(m=d.right-l.left+10,p=d.top-l.top)}else m=n.left-l.left,p=n.top-l.top;e.style.transition="transform 1s ease-in-out",e.style.transform=`translate(${m}px, ${p}px)`,setTimeout(()=>{b.value++,k.value=!1,e.style.transition="",e.style.transform=""},400)}},B=()=>{_.value<h.value.length-1?_.value++:_.value=0};return K(async()=>{g.value=(await j()).currentWordbank.value,console.log("Current Wordbank:",g.value),z()}),(e,s)=>{const n=v("q-card-section"),l=v("q-card"),o=v("q-btn"),m=v("q-input"),p=v("q-banner"),T=v("q-page");return u(),y(T,{class:"q-pa-md row justify-center items-center"},{default:r(()=>[i("div",U,[t(l,{class:"q-pa-md"},{default:r(()=>[t(n,{class:"text-center"},{default:r(()=>[i("div",X," Score: "+q(w.value)+" Wrong: "+q(x.value),1)]),_:1})]),_:1}),a.value?(u(),y(l,{key:0,class:"q-pa-md",style:{"max-width":"600px",width:"100%"}},{default:r(()=>[t(n,{class:"text-center"},{default:r(()=>[i("div",H,q(a.value.text),1)]),_:1}),t(n,{class:"text-center q-mt-md"},{default:r(()=>[i("div",null,[t(o,{label:"Yes I know",color:"positive",class:"q-mr-md q-px-lg q-py-md",style:{"font-size":"1rem"},onClick:I}),t(o,{label:"No",color:"negative",class:"q-px-lg q-py-md",style:{"font-size":"1rem"},onClick:R})]),s[1]||(s[1]=i("br",null,null,-1)),i("div",null,[t(o,{label:"Add Backside",color:"primary",onClick:e.toggleBacksideInput,style:{"font-size":"0.8rem"}},null,8,["onClick"])])]),_:1}),e.showBacksideInput?(u(),y(n,{key:0,class:"q-mt-md text-center"},{default:r(()=>[t(m,{modelValue:e.backsideText,"onUpdate:modelValue":s[0]||(s[0]=d=>e.backsideText=d),placeholder:"Enter backside content",outlined:"",style:{"max-width":"100%","margin-bottom":"10px"}},null,8,["modelValue"]),i("div",null,[t(o,{label:"OK",color:"positive",class:"q-mr-md q-px-md",style:{"font-size":"0.8rem"},onClick:e.confirmBackside},null,8,["onClick"]),t(o,{label:"Cancel",color:"negative",class:"q-px-md",style:{"font-size":"0.8rem"},onClick:e.cancelBackside},null,8,["onClick"])])]),_:1})):N("",!0),t(n,{class:"text-center"},{default:r(()=>[t(o,{label:"Back",color:"blue",onClick:P})]),_:1})]),_:1})):(u(),f("div",J,[t(p,{class:"q-mt-md",type:"positive",icon:"check_circle"},{default:r(()=>s[2]||(s[2]=[M(" All words reviewed. Great job! ")])),_:1})]))]),i("div",Z,[(u(!0),f(L,null,G(b.value,(d,W)=>(u(),f("div",{key:W,class:"star-static"}," \u2B50 "))),128))]),k.value?(u(),f("div",{key:0,class:"star-moving",ref_key:"movingStar",ref:C},"\u2B50",512)):N("",!0)]),_:1})}}};var ce=Q(ee,[["__scopeId","data-v-5fd93c77"]]);export{ce as default};
